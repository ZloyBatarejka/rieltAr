# Balivi — Управление арендой недвижимости

Сервис для управляющих недвижимостью, которые сдают объекты собственников в аренду.

## Проблема

Управляющий принимает все деньги от аренды на себя, оплачивает расходы (уборка, комиссии агрегаторов) и должен вести прозрачный учёт для каждого собственника. Без системы — это таблицы, мессенджеры и бесконечные вопросы «сколько мне должны?».

## Решение

Каждый собственник получает личный кабинет с виртуальным счётом (как в банковском приложении), где видит:

- **Поступления** — доход от аренды
- **Расходы** — комиссии, уборка, прочие расходы
- **Выплаты** — переводы от менеджера
- **Баланс** — сколько менеджер должен собственнику прямо сейчас

Менеджер заполняет данные — собственник видит результат. Просто, понятно, без бухгалтерских терминов.

## Роли

| Роль | Возможности |
|------|-------------|
| **Администратор** | Создаёт менеджеров и собственников, объекты. Назначает объекты на менеджеров. Суперпользователь — видит и может всё. |
| **Менеджер** | Работает только с назначенными объектами: заезды, операции, выплаты. Видит собственников, у которых есть назначенные объекты. |
| **Собственник** | Видит свои объекты, баланс, историю операций, заезды и выплаты. |

## Технологический стек

| Слой | Технологии |
|------|-----------|
| **Frontend** | React, TypeScript, Chakra UI, Vite |
| **Backend** | Node.js, NestJS, TypeScript |
| **ORM** | Prisma |
| **База данных** | PostgreSQL |
| **Авторизация** | JWT + bcrypt |

## Структура проекта

```
balivi/
├── backend/          # NestJS API (порт 8070)
│   ├── prisma/       # Схема БД, миграции, seed
│   └── src/          # Модули приложения
├── frontend/         # React SPA (порт 3070)
│   └── src/          # FSD: entities, features, widgets, pages
├── swagger/          # OpenAPI swagger.json
├── README.md
├── TECHNICAL_SPEC.md
├── PLAN.md
└── ADMIN_ROLE_PLAN.md # План роли ADMIN и скоупинга
```

## Быстрый старт

### Требования

- Node.js >= 18
- PostgreSQL >= 14
- npm или yarn

### Backend

```bash
cd backend
npm install
cp .env.example .env        # Настроить подключение к БД
npx prisma migrate dev      # Применить миграции
npx prisma db seed          # Создать ADMIN (admin@balivi.ru / admin123)
npm run start:dev            # Запустить сервер (http://localhost:8070)
```

### Frontend

```bash
cd frontend
npm install
cp .env.example .env        # Указать URL API
npm run dev                  # Запустить dev-сервер (http://localhost:3070)
```

## Переменные окружения

### Backend (`backend/.env`)

```env
DATABASE_URL="postgresql://postgres:60040@localhost:5432/rieltar?schema=public"
JWT_SECRET="your-secret-key"
JWT_EXPIRES_IN="1d"
```

### Frontend (`frontend/.env`)

```env
VITE_API_URL="http://localhost:8070"
```

## Принципы

- **Простота** — минимум кликов, понятный интерфейс
- **Прозрачность** — финансы за 10 секунд
- **MVP first** — сначала базовый функционал, потом масштабирование

## Документация

- [Техническое задание](./TECHNICAL_SPEC.md)
- [План разработки](./PLAN.md)
- [План роли ADMIN и скоупинга](./ADMIN_ROLE_PLAN.md)


